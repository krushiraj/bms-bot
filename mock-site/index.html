<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MockBook - Movie Ticket Booking (Practice Site)</title>
  <style>
    :root {
      --primary: #e63946;
      --primary-dark: #c1121f;
      --secondary: #457b9d;
      --dark: #1d3557;
      --light: #f1faee;
      --success: #2d6a4f;
    }
    
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #1d3557 0%, #457b9d 100%);
      min-height: 100vh;
      color: #333;
    }
    
    .banner {
      background: #ffcc00;
      color: #333;
      text-align: center;
      padding: 8px;
      font-size: 14px;
    }
    
    header {
      background: var(--dark);
      color: white;
      padding: 16px 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .logo { font-size: 24px; font-weight: bold; }
    .logo span { color: var(--primary); }
    
    .search-box {
      display: flex;
      gap: 8px;
    }
    
    .search-box input {
      padding: 10px 16px;
      border: none;
      border-radius: 4px;
      width: 300px;
      font-size: 14px;
    }
    
    .search-box input:focus { outline: 2px solid var(--primary); }
    
    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.2s;
    }
    
    .btn-primary {
      background: var(--primary);
      color: white;
    }
    
    .btn-primary:hover { background: var(--primary-dark); }
    
    .btn-primary:disabled {
      background: #999;
      cursor: not-allowed;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 24px;
    }
    
    /* Page Sections */
    .page { display: none; }
    .page.active { display: block; }
    
    /* Date Picker */
    .date-picker {
      display: flex;
      gap: 8px;
      margin-bottom: 24px;
      overflow-x: auto;
      padding: 8px 0;
    }
    
    .date-item {
      background: white;
      border: 2px solid transparent;
      border-radius: 8px;
      padding: 12px 16px;
      text-align: center;
      cursor: pointer;
      min-width: 70px;
      transition: all 0.2s;
    }
    
    .date-item:hover { border-color: var(--primary); }
    .date-item.active { border-color: var(--primary); background: #ffe6e8; }
    .date-item .day { font-size: 12px; color: #666; }
    .date-item .num { font-size: 20px; font-weight: bold; }
    
    /* Movie Cards */
    .movie-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 24px;
    }
    
    .movie-card {
      background: white;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      transition: transform 0.2s;
    }
    
    .movie-card:hover { transform: translateY(-4px); }
    
    .movie-poster {
      height: 280px;
      background: linear-gradient(45deg, #667eea 0%, #764ba2 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 48px;
    }
    
    .movie-info { padding: 16px; }
    .movie-title { font-weight: bold; margin-bottom: 8px; }
    .movie-meta { font-size: 12px; color: #666; margin-bottom: 12px; }
    .movie-rating { color: #f59e0b; }
    
    /* Theatre List */
    .theatre-card {
      background: white;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 16px;
    }
    
    .theatre-name { font-size: 18px; font-weight: bold; margin-bottom: 4px; }
    .theatre-address { color: #666; font-size: 14px; margin-bottom: 12px; }
    
    .showtimes {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    
    .showtime-btn {
      padding: 10px 20px;
      border: 2px solid var(--secondary);
      background: white;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.2s;
    }
    
    .showtime-btn:hover:not(.disabled) {
      background: var(--secondary);
      color: white;
    }
    
    .showtime-btn.disabled {
      border-color: #ddd;
      color: #999;
      cursor: not-allowed;
    }
    
    /* Seat Layout */
    .seat-layout {
      background: white;
      border-radius: 12px;
      padding: 24px;
    }
    
    .screen {
      background: #ddd;
      text-align: center;
      padding: 8px;
      margin-bottom: 32px;
      border-radius: 4px;
      color: #666;
    }
    
    .seat-grid {
      display: flex;
      flex-direction: column;
      gap: 8px;
      align-items: center;
    }
    
    .seat-row {
      display: flex;
      gap: 6px;
      align-items: center;
    }
    
    .row-label {
      width: 24px;
      text-align: center;
      font-weight: bold;
      color: #666;
    }
    
    .seat {
      width: 28px;
      height: 28px;
      border-radius: 4px;
      border: none;
      cursor: pointer;
      font-size: 10px;
      transition: all 0.2s;
    }
    
    .seat.available { background: #4ade80; }
    .seat.available:hover { background: #22c55e; transform: scale(1.1); }
    .seat.sold { background: #ef4444; cursor: not-allowed; }
    .seat.selected { background: var(--primary); color: white; }
    
    .seat-legend {
      display: flex;
      gap: 20px;
      justify-content: center;
      margin-top: 24px;
    }
    
    .legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
    }
    
    .legend-box {
      width: 20px;
      height: 20px;
      border-radius: 4px;
    }
    
    /* Selection Summary */
    .selection-summary {
      background: var(--dark);
      color: white;
      padding: 16px 24px;
      border-radius: 12px;
      margin-top: 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    /* Payment Page */
    .order-summary {
      background: white;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 24px;
    }
    
    .order-row {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid #eee;
    }
    
    .order-row:last-child { border-bottom: none; }
    .order-total { font-weight: bold; font-size: 18px; }
    
    .payment-methods {
      background: white;
      border-radius: 12px;
      padding: 24px;
    }
    
    .payment-option {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px;
      border: 2px solid #eee;
      border-radius: 8px;
      margin-bottom: 12px;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .payment-option:hover { border-color: var(--primary); }
    .payment-option.selected { border-color: var(--primary); background: #ffe6e8; }
    
    /* Success Page */
    .success-page {
      text-align: center;
      padding: 48px;
    }
    
    .success-icon {
      font-size: 80px;
      margin-bottom: 24px;
    }
    
    .booking-id {
      background: var(--light);
      padding: 16px 32px;
      border-radius: 8px;
      font-family: monospace;
      font-size: 24px;
      display: inline-block;
      margin: 24px 0;
    }
    
    /* Loading */
    .loading-spinner {
      display: none;
      text-align: center;
      padding: 40px;
    }
    
    .loading-spinner.active { display: block; }
    
    .spinner {
      width: 40px;
      height: 40px;
      border: 4px solid #eee;
      border-top-color: var(--primary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 16px;
    }
    
    @keyframes spin { to { transform: rotate(360deg); } }
    
    /* Session Timer */
    .session-timer {
      background: #fee2e2;
      color: var(--primary-dark);
      padding: 8px 16px;
      border-radius: 4px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="banner">
    üéì This is a MOCK booking site for learning Playwright automation
  </div>
  
  <header>
    <div class="logo">Mock<span>Book</span></div>
    <div class="search-box">
      <input type="text" id="searchInput" data-testid="search-input" placeholder="Search for movies...">
      <button class="btn btn-primary" data-testid="search-button">Search</button>
    </div>
    <div class="location" data-testid="location-button">üìç Hyderabad</div>
  </header>
  
  <!-- PAGE 1: Movie Selection -->
  <div id="homePage" class="page active">
    <div class="container">
      <h2 style="color: white; margin-bottom: 16px;">üóì Select Date</h2>
      
      <div class="date-picker" data-testid="date-picker">
        <!-- Dates will be generated by JS -->
      </div>
      
      <h2 style="color: white; margin-bottom: 16px;">üé¨ Now Showing</h2>
      
      <div class="movie-grid" data-testid="movie-list">
        <!-- Movies will be generated by JS -->
      </div>
    </div>
  </div>
  
  <!-- PAGE 2: Theatre Selection -->
  <div id="theatrePage" class="page">
    <div class="container">
      <h2 style="color: white; margin-bottom: 16px;" data-testid="selected-movie-title"></h2>
      
      <div data-testid="theatre-list">
        <!-- Theatres will be generated by JS -->
      </div>
    </div>
  </div>
  
  <!-- PAGE 3: Seat Selection -->
  <div id="seatPage" class="page">
    <div class="container">
      <div class="seat-layout">
        <div class="screen" data-testid="screen">SCREEN THIS WAY</div>
        
        <div class="seat-grid" data-testid="seat-layout">
          <!-- Seats will be generated by JS -->
        </div>
        
        <div class="seat-legend" data-testid="seat-legend">
          <div class="legend-item" data-testid="legend-item" data-category="available">
            <div class="legend-box" style="background: #4ade80;"></div>
            <span>Available</span>
          </div>
          <div class="legend-item" data-testid="legend-item" data-category="sold">
            <div class="legend-box" style="background: #ef4444;"></div>
            <span>Sold</span>
          </div>
          <div class="legend-item" data-testid="legend-item" data-category="selected">
            <div class="legend-box" style="background: var(--primary);"></div>
            <span>Selected</span>
          </div>
        </div>
        
        <div class="selection-summary" data-testid="selection-info">
          <div>
            <span id="selectedSeatsText">No seats selected</span>
          </div>
          <div>
            <span id="totalPriceText" data-testid="total-price">‚Çπ0</span>
            <button class="btn btn-primary" id="proceedBtn" data-testid="proceed-btn" disabled>Proceed</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- PAGE 4: Payment -->
  <div id="paymentPage" class="page">
    <div class="container" style="max-width: 600px;">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
        <h2 style="color: white;">üí≥ Payment</h2>
        <div class="session-timer" data-testid="session-timer">08:00</div>
      </div>
      
      <div class="order-summary" data-testid="order-summary">
        <h3 style="margin-bottom: 16px;">Order Summary</h3>
        <div class="order-row">
          <span>Movie</span>
          <span data-testid="movie-name" id="summaryMovie">-</span>
        </div>
        <div class="order-row">
          <span>Theatre</span>
          <span data-testid="theatre-name" id="summaryTheatre">-</span>
        </div>
        <div class="order-row">
          <span>Showtime</span>
          <span data-testid="showtime" id="summaryShowtime">-</span>
        </div>
        <div class="order-row">
          <span>Seats</span>
          <span data-testid="seat-numbers" id="summarySeats">-</span>
        </div>
        <div class="order-row">
          <span>Tickets</span>
          <span data-testid="ticket-count" id="summaryCount">-</span>
        </div>
        <div class="order-row order-total">
          <span>Total</span>
          <span data-testid="total-amount" id="summaryTotal">-</span>
        </div>
      </div>
      
      <div class="payment-methods" data-testid="payment-methods">
        <h3 style="margin-bottom: 16px;">Select Payment Method</h3>
        
        <div class="payment-option" data-testid="payment-option" data-method="upi" onclick="selectPayment('upi')">
          <span style="font-size: 24px;">üì±</span>
          <div>
            <strong>UPI</strong>
            <div style="font-size: 12px; color: #666;">Pay using any UPI app</div>
          </div>
        </div>
        
        <div class="payment-option" data-testid="payment-option" data-method="card" onclick="selectPayment('card')">
          <span style="font-size: 24px;">üí≥</span>
          <div>
            <strong>Credit/Debit Card</strong>
            <div style="font-size: 12px; color: #666;">Visa, Mastercard, RuPay</div>
          </div>
        </div>
        
        <div class="payment-option" data-testid="payment-option" data-method="wallet" onclick="selectPayment('wallet')">
          <span style="font-size: 24px;">üëõ</span>
          <div>
            <strong>Wallet</strong>
            <div style="font-size: 12px; color: #666;">Paytm, PhonePe, etc.</div>
          </div>
        </div>
        
        <button class="btn btn-primary" style="width: 100%; margin-top: 16px; padding: 16px;" 
                data-testid="pay-button" onclick="processPayment()">
          Pay Now
        </button>
      </div>
    </div>
  </div>
  
  <!-- PAGE 5: Success -->
  <div id="successPage" class="page">
    <div class="container">
      <div class="success-page" style="background: white; border-radius: 12px;">
        <div class="success-icon">üéâ</div>
        <h1 data-testid="payment-success">Booking Confirmed!</h1>
        <p style="color: #666; margin: 16px 0;">Your tickets have been booked successfully</p>
        <div class="booking-id" data-testid="booking-id">MBK2024001234</div>
        <p style="color: #666;">A confirmation has been sent to your email</p>
      </div>
    </div>
  </div>
  
  <!-- Loading Spinner -->
  <div class="loading-spinner" id="loadingSpinner" data-testid="loading">
    <div class="spinner"></div>
    <p style="color: white;">Loading...</p>
  </div>
  
  <script>
    // State management
    const state = {
      selectedMovie: null,
      selectedTheatre: null,
      selectedShowtime: null,
      selectedSeats: [],
      selectedDate: null,
    };
    
    // Sample data
    const movies = [
      { id: 1, title: 'Inception', genre: 'Sci-Fi, Action', rating: '8.8', language: 'English', format: '2D' },
      { id: 2, title: 'The Dark Knight', genre: 'Action, Crime', rating: '9.0', language: 'English', format: '2D' },
      { id: 3, title: 'Interstellar', genre: 'Sci-Fi, Drama', rating: '8.6', language: 'English', format: 'IMAX' },
      { id: 4, title: 'Pushpa 2', genre: 'Action, Drama', rating: '8.2', language: 'Telugu', format: '2D' },
      { id: 5, title: 'Kalki 2898 AD', genre: 'Sci-Fi, Action', rating: '8.0', language: 'Telugu', format: '3D' },
      { id: 6, title: 'Salaar', genre: 'Action, Thriller', rating: '7.8', language: 'Telugu', format: '2D' },
    ];
    
    const theatres = [
      { id: 1, name: 'PVR ICON: GVK One Mall, Banjara Hills', address: 'GVK One Mall, Road No. 1, Banjara Hills', 
        showtimes: ['10:00 AM', '01:30 PM', '04:45 PM', '08:00 PM', '11:15 PM'] },
      { id: 2, name: 'INOX: GVK One, Banjara Hills', address: 'GVK One Mall, Level 5, Banjara Hills',
        showtimes: ['10:30 AM', '02:00 PM', '05:15 PM', '08:30 PM'] },
      { id: 3, name: 'AMB Cinemas: Gachibowli', address: 'Sarath City Capital Mall, Gachibowli',
        showtimes: ['09:30 AM', '12:45 PM', '04:00 PM', '07:15 PM', '10:30 PM'] },
      { id: 4, name: 'PVR: Nexus Mall, Kukatpally', address: 'Nexus Kukatpally, KPHB Colony',
        showtimes: ['11:00 AM', '02:30 PM', '06:00 PM', '09:30 PM'] },
    ];
    
    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      renderDates();
      renderMovies();
      setupSearch();
    });
    
    function renderDates() {
      const container = document.querySelector('.date-picker');
      const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
      const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
      
      for (let i = 0; i < 7; i++) {
        const date = new Date();
        date.setDate(date.getDate() + i);
        
        const dateStr = date.toISOString().split('T')[0];
        const div = document.createElement('div');
        div.className = 'date-item' + (i === 0 ? ' active' : '');
        div.setAttribute('data-testid', 'date-item');
        div.setAttribute('data-date', dateStr);
        div.innerHTML = `
          <div class="day">${days[date.getDay()]}</div>
          <div class="num">${date.getDate()}</div>
          <div class="day">${months[date.getMonth()]}</div>
        `;
        div.onclick = () => selectDate(div, dateStr);
        container.appendChild(div);
        
        if (i === 0) state.selectedDate = dateStr;
      }
    }
    
    function selectDate(element, dateStr) {
      document.querySelectorAll('.date-item').forEach(el => el.classList.remove('active'));
      element.classList.add('active');
      state.selectedDate = dateStr;
    }
    
    function renderMovies() {
      const container = document.querySelector('.movie-grid');
      container.innerHTML = movies.map(movie => `
        <div class="movie-card" data-testid="movie-card" data-id="${movie.id}">
          <div class="movie-poster">${movie.title[0]}</div>
          <div class="movie-info">
            <div class="movie-title" data-testid="movie-title">${movie.title}</div>
            <div class="movie-meta" data-testid="movie-genre">${movie.genre}</div>
            <div class="movie-meta">${movie.language} ‚Ä¢ ${movie.format}</div>
            <div class="movie-rating" data-testid="movie-rating">‚≠ê ${movie.rating}</div>
            <button class="btn btn-primary" data-testid="book-button" 
                    onclick="selectMovie(${movie.id})" style="width: 100%; margin-top: 12px;">
              Book Tickets
            </button>
          </div>
        </div>
      `).join('');
    }
    
    function setupSearch() {
      const input = document.getElementById('searchInput');
      input.addEventListener('input', (e) => {
        const query = e.target.value.toLowerCase();
        document.querySelectorAll('.movie-card').forEach(card => {
          const title = card.querySelector('.movie-title').textContent.toLowerCase();
          card.style.display = title.includes(query) ? 'block' : 'none';
        });
      });
    }
    
    function selectMovie(id) {
      const movie = movies.find(m => m.id === id);
      state.selectedMovie = movie;
      showPage('theatrePage');
      document.querySelector('[data-testid="selected-movie-title"]').textContent = 
        `üé¨ ${movie.title} - Select Theatre & Showtime`;
      renderTheatres();
    }
    
    function renderTheatres() {
      const container = document.querySelector('[data-testid="theatre-list"]');
      container.innerHTML = theatres.map(theatre => `
        <div class="theatre-card" data-testid="theatre-card">
          <div class="theatre-name" data-testid="theatre-name">${theatre.name}</div>
          <div class="theatre-address" data-testid="theatre-address">${theatre.address}</div>
          <div class="showtimes" data-testid="showtimes">
            ${theatre.showtimes.map((time, i) => `
              <button class="showtime-btn ${Math.random() > 0.8 ? 'disabled' : ''}" 
                      data-testid="showtime-btn"
                      ${Math.random() > 0.8 ? 'disabled' : ''}
                      onclick="selectShowtime('${theatre.name}', '${time}')">
                ${time}
              </button>
            `).join('')}
          </div>
        </div>
      `).join('');
    }
    
    function selectShowtime(theatre, time) {
      state.selectedTheatre = theatre;
      state.selectedShowtime = time;
      showPage('seatPage');
      renderSeats();
    }
    
    function renderSeats() {
      const container = document.querySelector('[data-testid="seat-layout"]');
      const rows = 'ABCDEFGHIJKLMN'.split('');
      
      container.innerHTML = rows.map(row => {
        const seats = [];
        for (let i = 1; i <= 16; i++) {
          const isSold = Math.random() > 0.7;
          seats.push(`
            <button class="seat ${isSold ? 'sold' : 'available'}" 
                    data-testid="seat"
                    data-seat="${i}"
                    data-row="${row}"
                    data-category="${row <= 'E' ? 'classic' : row <= 'K' ? 'prime' : 'recliner'}"
                    data-price="${row <= 'E' ? 150 : row <= 'K' ? 250 : 400}"
                    ${isSold ? 'disabled' : ''}
                    onclick="toggleSeat(this, '${row}', ${i})">
              ${i}
            </button>
          `);
        }
        return `
          <div class="seat-row" data-testid="seat-row">
            <span class="row-label" data-testid="row-label">${row}</span>
            ${seats.join('')}
            <span class="row-label">${row}</span>
          </div>
        `;
      }).join('');
    }
    
    function toggleSeat(element, row, num) {
      if (element.classList.contains('sold')) return;
      
      const seatId = `${row}${num}`;
      const price = parseInt(element.dataset.price);
      
      if (element.classList.contains('selected')) {
        element.classList.remove('selected');
        element.classList.add('available');
        state.selectedSeats = state.selectedSeats.filter(s => s.id !== seatId);
      } else {
        element.classList.remove('available');
        element.classList.add('selected');
        state.selectedSeats.push({ id: seatId, row, num, price });
      }
      
      updateSelectionSummary();
    }
    
    function updateSelectionSummary() {
      const seats = state.selectedSeats;
      const total = seats.reduce((sum, s) => sum + s.price, 0);
      
      document.getElementById('selectedSeatsText').textContent = 
        seats.length > 0 ? `Selected: ${seats.map(s => s.id).join(', ')}` : 'No seats selected';
      document.getElementById('totalPriceText').textContent = `‚Çπ${total}`;
      document.getElementById('proceedBtn').disabled = seats.length === 0;
    }
    
    document.getElementById('proceedBtn').addEventListener('click', () => {
      showPage('paymentPage');
      updatePaymentSummary();
      startTimer();
    });
    
    function updatePaymentSummary() {
      const seats = state.selectedSeats;
      const total = seats.reduce((sum, s) => sum + s.price, 0);
      
      document.getElementById('summaryMovie').textContent = state.selectedMovie.title;
      document.getElementById('summaryTheatre').textContent = state.selectedTheatre;
      document.getElementById('summaryShowtime').textContent = state.selectedShowtime;
      document.getElementById('summarySeats').textContent = seats.map(s => s.id).join(', ');
      document.getElementById('summaryCount').textContent = seats.length;
      document.getElementById('summaryTotal').textContent = `‚Çπ${total}`;
    }
    
    function selectPayment(method) {
      document.querySelectorAll('.payment-option').forEach(el => el.classList.remove('selected'));
      document.querySelector(`[data-method="${method}"]`).classList.add('selected');
    }
    
    function startTimer() {
      let seconds = 480; // 8 minutes
      const timer = setInterval(() => {
        seconds--;
        const mins = Math.floor(seconds / 60);
        const secs = seconds % 60;
        document.querySelector('[data-testid="session-timer"]').textContent = 
          `${String(mins).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
        if (seconds <= 0) clearInterval(timer);
      }, 1000);
    }
    
    function processPayment() {
      showLoading();
      setTimeout(() => {
        hideLoading();
        showPage('successPage');
        // Generate random booking ID
        const bookingId = 'MBK' + Date.now().toString().slice(-10);
        document.querySelector('[data-testid="booking-id"]').textContent = bookingId;
      }, 2000);
    }
    
    function showPage(pageId) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById(pageId).classList.add('active');
    }
    
    function showLoading() {
      document.getElementById('loadingSpinner').classList.add('active');
    }
    
    function hideLoading() {
      document.getElementById('loadingSpinner').classList.remove('active');
    }
  </script>
</body>
</html>
